
{% extends "home.html" %}


{% block main %}

<!-- Loop Over Places -->
{% for i in place %}

<!-- Destination Banner -->
<div class="destination_banner_wrap overlay position-relative" style="background-image: url('{{ i.placePic.url }}'); background-size: cover; background-position: center; padding: 250px 0; perspective: 1000px; margin-top: 70px;">
    <div class="destination_text text-center position-relative" style="transform-style: preserve-3d;">
        <h1 class="display-4 fw-bold text-white mb-3">{{ i.placeName }}</h1>
        <p class="fs-5 text-white">{{ i.placeLocation }}, {{ i.state }}</p>
    </div>
</div>

<!-- Destination Details Section -->
<div class="destination_details_info py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">

                <!-- Description -->
                <div class="destination_info bg-white p-4 rounded-3 shadow-lg mb-5" style="perspective: 1000px;">
                    <h2 class="h3 fw-bold mb-4 g text-center">Description</h2>
                    <p class="text-muted">{{ i.description }}</p>

                    <!-- Popular Places -->
                    <div class="single_destination mt-5">
                        <h3 class="h4 fw-bold text-center">Popular Places in {{ i.placeName }}</h3>
                        <p class="text-muted">Explore the best attractions this destination has to offer.</p>
                    </div>

                    <div class="popular_places_area py-4">
                        {% if i.places %}
                        <div class="row g-4">
                            {% for j in i.places %}
                            <div class="col-lg-4 col-md-6">
                                <div class="single_place card border-0 shadow-sm h-100">
                                    <div class="card-img-top overflow-hidden">
                                        <img src="/{{ j.img }}" class="img-fluid" alt="{{ j.placeName }}" style="object-fit: cover; height: 200px;">
                                    </div>
                                    <div class="card-body">
                                        <a href="{% url 'placesingledest' i.placeID forloop.counter %}" class="fw-bold h5 text-dark text-decoration-none">{{ j.placename }}</a>
                                        <p class="card-text text-muted small">{{ j.location }}, {{ i.state }}</p>
                                        <div class="rating_days d-flex align-items-center mt-2">
                                            <i class="fa fa-star text-warning"></i>
                                            <i class="fa fa-star text-warning"></i>
                                            <i class="fa fa-star text-warning"></i>
                                            <i class="fa fa-star text-warning"></i>
                                            <i class="fa fa-star text-warning"></i>
                                        </div>
                                        {% if login == 'admin' %}
                                        <div class="mt-3 d-flex gap-2">
                                            <!-- <a href="#" class="btn btn-primary btn-sm">Update</a> -->
                                            <a href="{% url 'deleteplace' i.placeID forloop.counter %}" class="btn btn-danger btn-sm w-100" onclick="return confirm('Are you sure you want to delete this place?');">Delete</a>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="text-center py-4">
                            <p class="text-muted">No places added yet.</p>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Popular Restaurants -->
                    <div class="single_destination mt-5">
                        <h3 class="h4 fw-bold text-center">Popular Restaurants and Food</h3>
                        <p class="text-muted">Discover the culinary delights of {{ i.placeName }}.</p>
                    </div>

                    <div class="popular_places_area py-4">
                        {% if i.restaurants %}
                        <div class="row g-4">
                            {% for j in i.restaurants %}
                            <div class="col-lg-4 col-md-6">
                                <div class="single_place card border-0 shadow-sm h-100">
                                    <div class="card-img-top overflow-hidden">
                                        <img src="/{{ j.img }}" class="img-fluid" alt="{{ j.foodname }}" style="object-fit: cover; height: 200px;">
                                    </div>
                                    <div class="card-body">
                                        <a href="{% url 'foodsingledest' i.placeID forloop.counter %}" class="fw-bold h5 text-dark text-decoration-none">{{ j.foodname }}</a>
                                        <h6 class="text-muted mt-2">{{ j.restname }}</h6>
                                        <p class="card-text text-muted small">{{ j.location }}, {{ i.state }}</p>
                                        {% if login == 'admin' %}
                                        <div class="mt-3 d-flex gap-2">
                                            <!-- <a href="#" class="btn btn-primary btn-sm">Update</a> -->
                                            <a href="{% url 'deletefoods' i.placeID forloop.counter %}" class="btn btn-danger btn-sm w-100" onclick="return confirm('Are you sure you want to delete this food?');">Delete</a>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="text-center py-4">
                            <p class="text-muted">No restaurants or foods added yet.</p>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Stay Rooms -->

                </div>

                {% if login == 'admin' %}
                <!-- Admin Options -->
                <div class="row g-4 my-5">
                    <div class="col-md-4" style="margin-left: 80px;">
                        <div class="card text-center shadow-sm h-100 p-3">
                            <div class="mb-3">
                                <img src="/static/assets/images/drink.png" alt="Places" style="height: 100px; width: 100px;">
                            </div>
                            <a href="{% url 'addsubplaces' i.placeID %}" class="fw-bold h5 text-dark text-decoration-none">Add Place</a>
                            <p class="text-muted small mt-2">Add new attractions for {{ i.placeName }}.</p>
                        </div>
                    </div>
                    <div class="col-md-4" style="margin-left: 80px;">
                        <div class="card text-center shadow-sm h-100 p-3">
                            <div class="mb-3">
                                <img src="/static/assets/images/dining-table_18132803.png" alt="Food" style="height: 100px; width: 100px;">
                            </div>
                            <a href="{% url 'addfoods' i.placeID %}" class="fw-bold h5 text-dark text-decoration-none">Add Food</a>
                            <p class="text-muted small mt-2">Add restaurants and food items.</p>
                        </div>
                    </div>
                </div>
                {% endif %}

            </div>
        </div>
    </div>
</div>

{% endfor %}

{% endblock %}

{% block places %}{% endblock %}

{% block footer %}{% endblock %}